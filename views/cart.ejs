<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart | ECOM - ejs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css"
    />
  </head>
  <body class="bg-gray-50 text-gray-800">
    <%- include('./partials/header') %>

    <div class="container mx-auto px-4 sm:px-10 py-10 space-y-12">
      <% user.cart.forEach(function(item) { %>
      <div
        class="flex flex-col lg:flex-row gap-8 bg-white rounded-lg shadow p-6"
      >
        <!-- Product Card -->
        <div class="w-full lg:w-1/3">
          <div
            class="w-full h-64 sm:h-80 bg-[<%= item.bgColor %>] rounded overflow-hidden"
          >
            <img
              src="data:image/jpeg;base64,<%= item.image.toString('base64') %>"
              class="w-full h-full object-cover"
              alt="<%= item.name %>"
            />
          </div>
          <div
            class="flex justify-between items-center px-4 py-3 bg-[<%= item.panelColor %>] text-[<%= item.textColor %>]"
          >
            <h3 class="text-lg font-semibold"><%= item.name %></h3>
            <div class="flex items-center gap-2">
              <i
                class="ri-add-line w-7 h-7 flex items-center justify-center rounded-full cursor-pointer text-xl hover:bg-white/20"
              ></i>
              <div class="px-3 py-1 bg-white text-black rounded-md">01</div>
              <i
                class="ri-subtract-line w-7 h-7 flex items-center justify-center rounded-full cursor-pointer text-xl hover:bg-white/20"
              ></i>
            </div>
          </div>
          <div
            class="flex justify-between px-4 py-3 font-medium text-[<%= item.textColor %>] bg-[<%= item.bgColor %>]"
          >
            <span>Net Total</span>
            <span>₹ <%= item.price - item.discount + 20 %></span>
          </div>
        </div>

        <!-- Price Breakdown -->
        <div class="w-full lg:w-2/3">
          <h3 class="text-xl font-semibold mb-4">Price Breakdown</h3>
          <div class="space-y-3">
            <div class="flex justify-between">
              <span>Total MRP</span>
              <span>₹ <%= item.price %></span>
            </div>
            <div class="flex justify-between">
              <span>Discount on MRP</span>
              <span>₹ <%= item.discount %></span>
            </div>
            <div class="flex justify-between">
              <span>Platform Fee</span>
              <span>₹ 20</span>
            </div>
            <div class="flex justify-between">
              <span>Shipping Fee</span>
              <span class="text-green-600 font-semibold">FREE</span>
            </div>
          </div>

          <div
            class="border-t mt-6 pt-4 flex justify-between text-lg font-bold"
          >
            <span>Total Amount</span>
            <span class="text-green-600"
              >₹ <%= item.price - item.discount + 20 %></span
            >
          </div>

          <form class="flex flex-col gap-3">
            <button
              type="submit"
              class="w-full mt-2 sm:w-auto bg-blue-600 text-white px-6 py-3 rounded-full hover:bg-blue-700 transition"
            >
              Checkout Now
            </button>
          </form>
        </div>
      </div>
      <% }) %>
    </div>

    <%- include('./partials/footer') %>
  </body>
</html>
